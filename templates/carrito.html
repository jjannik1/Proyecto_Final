{% extends 'base.html' %}
{% block title %}Carrito de Compras{% endblock %}
{% block content %}
<div>
<h1>Carrito de {{ session.nombre }}</h1>
{% if carrito %}
</div>

{% for item in carrito %}
<div>
    <ul>
    
        <li>{{ item.nombre }} - Cantidad: {{ item.cantidad }} - Precio unitario: ${{ item.precio }}

            <form action="{{ url_for('restar_producto', producto_id=item.producto_id) }}" method="POST" style="display:inline;">
                <button type="submit">-</button>
            </form>

            <form action="{{ url_for('sumar_producto', producto_id=item.producto_id) }}" method="POST" style="display:inline;">
                <button type="submit">+</button>
            </form>

            <form action="{{ url_for('eliminar_del_carrito', producto_id=item.producto_id) }}" method="POST" style="display:inline;">
                <button type="submit">Eliminar</button>
            </form>
        </li>
    </ul>
  </div>
    {% endfor %}
    
  <div>
    <p><strong>Total: ${{ total }}</strong></p>
  </div>
    <form action="{{ url_for('comprar', usuario_id=usuario_id) }}" method="POST" style="display:inline;" onsubmit="return confirm('¿Estas seguro de hacer la compra?')">
      <button type="submit">Comprar</button>
    </form>

    <form action="{{ url_for('vaciar_carrito') }}" method="POST">
        <button type="submit">Vaciar carrito</button>
    </form>

{% else %}
    <p>Tu carrito está vacío.</p>
{% endif %}
<form action="{{url_for('ver_productos')}}">
  <button type="submit">Seguir comprando</button>
</form>
<form action="{{url_for('logout')}}">
  <button type="submit">Cerrar sesión</button>
</form>
{% endblock %}
